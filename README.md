# blind-watermark GUI

基于频域的数字盲水印工具 - GUI版本

[![PyPI](https://img.shields.io/pypi/v/blind_watermark)](https://pypi.org/project/blind_watermark/)
[![License](https://github.com/oppositecode/blind_watermark_GUI/blob/main/LICENSE)
![Python](https://img.shields.io/badge/python->=3.5-green.svg)
![Platform](https://img.shields.io/badge/platform-windows%20|%20linux%20|%20macos-green.svg)

## 项目介绍

这是一个基于频域变换的图像盲水印工具，具有强大的抗攻击能力，支持文本、图片和二进制三种水印类型。本README将重点介绍图形用户界面（GUI）的使用方法，让您无需编写代码即可轻松使用盲水印功能。

## 目录

- [快速开始](#快速开始)
- [GUI界面使用指南](#gui界面使用指南)
  - [嵌入水印](#嵌入水印)
  - [提取水印](#提取水印)
- [功能特点](#功能特点)
- [抗攻击能力](#抗攻击能力)
- [安装方法](#安装方法)
- [常见问题](#常见问题)

## 快速开始

### 方法1：直接运行可执行文件（推荐给非开发者）

1. 进入项目的`dist`目录
2. 双击运行`blind_watermark_gui.exe`
3. 在图形界面中操作（详见下方使用指南）

### 方法2：通过Python脚本运行

确保已安装所有依赖：

```bash
pip install -r requirements.txt
```

然后运行：

```bash
python blind_watermark_gui.py
```

## GUI界面使用指南

### 嵌入水印

1. 在标签页中选择「嵌入水印」
2. 点击「浏览」按钮选择原图
3. 选择水印类型（文本/图片/二进制）
4. 根据水印类型输入对应内容：
   - **文本水印**：直接在输入框中输入文本内容
   - **图片水印**：点击「浏览」按钮选择水印图片
   - **二进制水印**：输入以逗号分隔的0/1序列，如：`1,0,1,1,0,0`
5. 设置图片密码和水印密码（默认均为1）
6. 选择输出图片的保存路径
7. 点击「嵌入水印」按钮

![嵌入水印界面示意图](docs/打上水印的图.jpg)

嵌入成功后，会显示水印长度（针对文本和二进制水印），请记住这个长度，提取时需要使用。

### 提取水印

1. 在标签页中选择「提取水印」
2. 点击「浏览」按钮选择带水印的图片
3. 选择水印类型（与嵌入时保持一致）
4. 输入水印形状/长度：
   - **文本水印**：输入文本长度（嵌入时显示的数字）
   - **图片水印**：输入图片尺寸，格式为`宽度,高度`，如`128,128`
   - **二进制水印**：输入二进制序列长度
5. 输入图片密码和水印密码（与嵌入时保持一致）
6. 选择提取结果的保存路径
7. 点击「提取水印」按钮

对于文本和二进制水印，提取结果会直接显示在界面上，同时保存到指定文件；对于图片水印，会保存到指定位置。

## 功能特点

### 1. 支持多种水印类型
- **文本水印**：嵌入文本信息，适用于版权声明、作者信息等
- **图片水印**：嵌入图片，适用于Logo、二维码等
- **二进制水印**：嵌入原始二进制数据，适用于加密信息等

### 2. 双重密码保护
- **图片密码**：用于图片分块打乱，保护图像水印嵌入位置
- **水印密码**：用于水印内容的加密，保护水印内容不被直接提取

### 3. 友好的用户界面
- 简洁直观的标签页设计
- 完整的文件浏览功能
- 详细的操作提示和错误处理
- 实时结果显示（文本和二进制水印）

## 抗攻击能力

这个盲水印算法具有强大的抗攻击能力，能够在多种图像处理操作后仍然成功提取水印：

| 攻击方式 | 提取效果 |
|----------|----------|
| 旋转攻击（45度） | 可以成功提取水印 |
| 随机截图 | 可以成功提取水印 |
| 多区域遮挡 | 可以成功提取水印 |
| 纵向裁剪 | 可以成功提取水印 |
| 横向裁剪 | 可以成功提取水印 |
| 缩放攻击 | 可以成功提取水印 |
| 椒盐噪声攻击 | 可以成功提取水印 |
| 亮度调整攻击 | 可以成功提取水印 |

## 安装方法

### 开发环境安装

1. 克隆项目：
```bash
git clone https://github.com/oppositecode/blind_watermark.git
cd blind_watermark
```

2. 安装依赖：
```bash
pip install -r requirements.txt
```

3. 安装包：
```bash
pip install .
```

### 打包可执行文件

如果您想将GUI打包为可执行文件，可以使用PyInstaller：

```bash
pip install pyinstaller
pyinstaller --onefile --windowed --name blind_watermark_gui blind_watermark_gui.py
```

生成的可执行文件将位于`dist`目录中。

## 常见问题

1. **问**：嵌入水印后，原图的画质会受到影响吗？
   **答**：水印是嵌入在频域中，对原图的视觉影响极小，人眼几乎无法察觉。

2. **问**：为什么提取水印时需要知道水印长度或形状？
   **答**：为了安全性，水印嵌入时会被打乱和加密，需要知道原始水印的尺寸才能正确提取。

3. **问**：密码忘记了怎么办？
   **答**：密码是提取水印的必要条件，如果忘记密码，将无法正确提取水印内容。

4. **问**：支持哪些图片格式？
   **答**：支持常见的图片格式，如JPG、PNG、BMP等。

5. **问**：水印可以嵌入多少信息？
   **答**：水印容量取决于原图大小，一般来说，原图越大，可以嵌入的信息量越多。

6. **问**：提取后的水印是还是水印原图吗？
   **答**：提取后的水印会被转为灰度图处理（丢失颜色信息）。

7. **问**：建议的水印图特征有哪些？
   **答**：推荐：简单的黑白Logo、二维码、文字图标、高对比度图案；不推荐：彩色照片（会变灰度）、复杂渐变图（会被二值化）、过大的图片（超出容量限制）。

8. **问**：对水印的尺寸有什么要求？
   **答**：水印尺寸必须小于原图容量(约原图面积/64),具体公式是block_num = (原图高度÷8) × (原图宽度÷8)（使用4×4分块，小波变换后减半）。

9. **问**：二进制文本嵌入时有什么要求？
   **答**：接受 True/False 布尔数组；GUI中输入：逗号分隔的0/1序列，如 1,0,1,1,0,0；其长度受原图大小影响，例如原图 800×600 → 最多 12,000 bit，原图 1920×1080 → 最多 64,800 bit。


10. **问**：二进制文本提取后的返回形式？
   **答**：提取后在终端返回布尔数组 True/False；GUI中转为 0/1 字符串显示。



## 许可证


本项目采用MIT许可证。详情请查看[LICENSE](LICENSE)文件。
